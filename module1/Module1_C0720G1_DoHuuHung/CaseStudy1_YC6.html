<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <script>
        class Customer {
            constructor(name,idCard,dateOfBirth,email,address,typeCustomer,
                        discount,quantityIncluded,rentDays,service,typeRoom) {
                this.name = name;
                this.idCard = idCard;
                this.dateOfBirth = dateOfBirth;
                this.email = email;
                this.address = address;
                this.typeCustomer = typeCustomer;
                this.discount = discount;
                this.quantityIncluded = quantityIncluded;
                this.rentDays = rentDays;
                this.service = service;
                this.typeRoom = typeRoom;
            }
            getName (){
                return this.name;
            }
            getIDCard (){
                return this.idCard;
            }
            getDateOfBirth (){
                return this.dateOfBirth;
            }
            getEmail (){
                return this.email;
            }
            getAddress (){
                return this.address;
            }
            getTypeCustomer (){
                return this.typeCustomer;
            }
            getDiscount (){
                return this.discount;
            }
            getQuantityIncluded (){
                return this.quantityIncluded;
            }
            getRentDays (){
                return this.rentDays;
            }
            getService (){
                return this.service;
            }
            getTypeRoom(){
                return this.typeRoom;
            }
            setName (name){
                this.name = name;
            }
            setIDCard (idCard){
                this.idCard = idCard;
            }
            setDateOfBirth (dateOfBirth){
                this.dateOfBirth = dateOfBirth;
            }
            setEmail (email){
                this.email = email;
            }
            setAddress (address){
                this.address = address;
            }
            setTypeCustomer (typeCustomer){
                this.typeCustomer = typeCustomer;
            }
            setDiscount (discount){
                this.discount = discount;
            }
            setQuantityIncluded (quantityIncluded){
                this.quantityIncluded = quantityIncluded;
            }
            setRentDays (rentDays){
                this.rentDays = rentDays;
            }
            setService (service){
                this.service = service;
            }
            setTypeRoom(typeRoom){
                this.typeRoom = typeRoom;
            }
            totalPay(){
                let pay = 0;
                if (this.service === "Villa"){
                    pay = 500 ;
                } else if (this.service === "House"){
                    pay = 300;
                } else if (this.service === "Room"){
                    pay = 100;
                }
                return pay * this.rentDays * (1 - this.discount/100);
            }
        }
        let arrListCustomer = [];
        function displayMainMenu() {
            let choose = parseInt(prompt("1. Them khach hang" + "\n2. Thong tin khach hang" + "\n3. Sua thong tin khach hang"
                + "\n4. Xoa khach hang" + "\n5.Tong thanh toan"));
            switch (choose) {
                case 1:{
                    addNewCustomer();
                    break;
                }
                case 2:{
                    displayCustomer();
                    break;
                }
                case 3:{
                    editCustomer();
                    break;
                }
                case 4:{
                    deleteCustomer();
                    break;
                }
                case 5:{
                    totalFinal();
                    break;
                }
                default:{
                    alert("Failed");
                }
            }
        }
        function addNewCustomer() {
            let checkValid = false;
            let regexIdcard = /^[\d]{9,9}$/;
            let regexBirthday = /^(?:0[1-9]|[12]\d|3[01])([\/.-])(?:0[1-9]|1[012])\1(?:19|20)\d\d$/;
            let regexsl = /^\d+$/;
            let regexEmail = /\S+@\S+\.\S+/;
            let regexDiscount = /^\d+$/;
            let regexRentDays = /^\d+$/;
            let idCard;
            let dateOfBirth;
            let quantityIncluded;
            let email;
            let discount;
            let rentDays;
            let customer = new Customer();
            let name = prompt("Ten khach hang");
            do {
                idCard = prompt("Chung minh nhan dan");
                if (regexIdcard.test(idCard)){
                    checkValid = true;
                } else {
                    alert("Chung minh nhan dan khong hop le");
                }
            } while (!checkValid);
            checkValid = false;

            do {
                dateOfBirth = prompt("Ngay sinh");
                if (regexBirthday.test(dateOfBirth)){
                    checkValid = true;
                }else {
                    alert("Ngay sinh khong hop le");
                }
            } while (!checkValid);
            checkValid = false;

            do {
                email = prompt("Email");
                if (regexEmail.test(email)){
                    checkValid = true;
                } else {
                    alert("Email khong hop le");
                }
            } while (!checkValid);
            checkValid = false;

            let address = prompt("Dia chi");
            let service = prompt("Loai dich vu (Villa: 500$, House: 300$, Room: 100$");
            let typeRoom = prompt("Loai phong thue");
            let typeCustomer = prompt("Loai khach hang");
            do {
                discount = parseInt(prompt("Giam gia"));
                if (regexDiscount.test(discount)){
                    checkValid = true;
                } else {
                    alert("Vui long nhap dung so giam gia");
                }
            } while (!checkValid);
            checkValid = false;

            do {
                quantityIncluded = prompt("So luong khach hang");
                if (regexsl.test(quantityIncluded)){
                    checkValid = true;
                } else {
                    alert("Vui long nhap dung so luong khach");
                }
            } while (!checkValid);
            checkValid = false;

            do {
                rentDays = parseInt(prompt("So ngay thue"));
                if (regexRentDays.test(rentDays)){
                    checkValid = true;
                } else {
                    alert("Vui long nhap dung so ngay thue");
                }
            }while (!checkValid);
            checkValid = false;

            // let customer = new Customer(name, idCard, dateOfBirth,
            //     email, address, typeCustomer, discount, quantityIncluded, rentDays, service, typeRoom);
            customer.setName(name);
            customer.setIDCard(idCard);
            customer.setDateOfBirth(dateOfBirth);
            customer.setEmail(email);
            customer.setAddress(address);
            customer.setService(service);
            customer.setTypeRoom(typeRoom);
            customer.setTypeCustomer(typeCustomer);
            customer.setDiscount(discount);
            customer.setQuantityIncluded(quantityIncluded);
            customer.setRentDays(rentDays);
            arrListCustomer.push(customer);
            alert("Nhap thanh cong!");
            displayMainMenu();
        }

        function displayCustomer() {
            let temp = "";
            for (i = 0; i < arrListCustomer.length; i++){
                temp += i + ". Name: " + arrListCustomer[i].getName() + "\n";
            }
            let chooseDisplay = parseInt(prompt(temp));
            alert(alert("1. Họ và tên: " + arrListCustomer[chooseDisplay].getName() + "\n" +
                "2. Chứng minh nhân dân: " + arrListCustomer[chooseDisplay].getIDCard() + "\n" +
                "3. Ngày sinh: " + arrListCustomer[chooseDisplay].getDateOfBirth() + "\n" +
                "4. Email: " + arrListCustomer[chooseDisplay].getEmail() + "\n" +
                "5. Địa chỉ: " + arrListCustomer[chooseDisplay].getAddress() + "\n" +
                "6. Loại dịch vụ: " + arrListCustomer[chooseDisplay].getService() + "\n" +
                "7. Loại phòng: " + arrListCustomer[chooseDisplay].getTypeRoom() + "\n" +
                "8. Loại khách hàng: " + arrListCustomer[chooseDisplay].getTypeCustomer() + "\n" +
                "9. Giảm giá: " + arrListCustomer[chooseDisplay].getDiscount() + "\n" +
                "10. Số khách hàng: " + arrListCustomer[chooseDisplay].getQuantityIncluded() + "\n" +
                "11. Số ngày thuê: " + arrListCustomer[chooseDisplay].getRentDays()));
            displayMainMenu();
        }
        displayMainMenu();

        function totalFinal() {
                let temp = "";
                for (i = 0; i < arrListCustomer.length; i++) {
                    temp += i + ". Name: " + arrListCustomer[i].getName() + "\n";
                }
                let chooseDisplay = parseInt(prompt(temp));
                let customer = arrListCustomer[chooseDisplay];
                alert("Tong tien phai tra la: " + customer.totalPay() + "usd");
                displayMainMenu();
        }
    </script>
</body>
</html>